<div class="container-fluid">
  <form [formGroup]="form" class="form-group">
    <div class="content-block">
      <p class="lead">选择源类型</p>

      @for (key of SAI_SEARCH_TYPES_KEYS; track key) {
        <div class="radio-container">
          <label class="cursor-pointer" [id]="SAI_SEARCH_TYPES[key]">
            <input [value]="key" [formControlName]="'source_type'" (change)="onSelectedTypeChange()" type="radio" />
            <span class="radio-text">{{ SAI_SEARCH_TYPES[key] }}</span>
          </label>
        </div>
      }
    </div>

    @if (sourceTypeControl.valid) {
      <div class="content-block">
        <p class="lead">
          选择
          @if (isTypeCreatureSelected) {
            生物
          }
          @if (isTypeGameobjectSelected) {
            物体
          }
          @if (isTypeAreatriggerSelected) {
            区域触发器
          }
          @if (isTypeTimedActionlistsSelected) {
            定时动作列表
          }
        </p>
        <div class="row">
          <div class="form-group col-12">
            <label class="control-label mb-2" for="entryorguid">
              @if (isTypeCreatureSelected || isTypeGameobjectSelected) {
                输入负数选择GUID(-)或输入正数选择模板ID(+)
              }
              @if (isTypeAreatriggerSelected) {
                输入区域触发器ID
              }
              @if (isTypeTimedActionlistsSelected) {
                定时动作列表ID由<strong>生物模板ID</strong>加上<strong>两位数字</strong>组成
              }
            </label>
            @if (isTypeCreatureSelected) {
              <keira-creature-selector-btn
                [control]="entryOrGuidControl"
                [disabled]="entryOrGuidControl.disabled"
                [config]="{ name: 'entryorguid' }"
              />
            }
            @if (isTypeGameobjectSelected) {
              <keira-gameobject-selector-btn
                [control]="entryOrGuidControl"
                [disabled]="entryOrGuidControl.disabled"
                [config]="{ name: 'entryorguid' }"
              />
            }
            <input [formControlName]="'entryorguid'" id="entryorguid" type="number" class="form-control form-control-sm" />
            <div class="mt-2">如果所选实体还没有SmartAI脚本，将会创建新的脚本。</div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-12">
            <button class="btn btn-success float-end" [disabled]="entryOrGuidControl.invalid" (click)="onEdit()" id="edit-btn">
              编辑SmartAI
            </button>
          </div>
        </div>
      </div>
    }
  </form>
</div>
